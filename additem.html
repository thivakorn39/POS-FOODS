<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100">

    <div class="container mx-auto mt-8 p-4 bg-white rounded-lg shadow-md">
        <h1 class="text-2xl font-semibold mb-4">Form</h1>

        <form>
            <div class="mb-4">
                <label for="nameId" class="block text-sm font-medium text-gray-600">ชื่อสินค้า</label>
                <input type="text" id="nameId" name="nameId" placeholder="Enter nameId"
                    class="mt-1 p-2 border rounded-md w-full">
            </div>

            <div class="mb-4">
                <label for="roleId" class="block text-sm font-medium text-gray-600">ราคา (บาท)</label>
                <input type="text" id="roleId" name="roleId" placeholder="Enter roleId"
                    class="mt-1 p-2 border rounded-md w-full">
            </div>

            <div class="mb-4">
                <label for="numberId" class="block text-sm font-medium text-gray-600">หมวดหมู่</label>
               
                    <select id="numberId">
                        <option value="ข้าว">ข้าว</option>
                        <option value="เส้น">เส้น</option>
                        <option value="เครื่องดื่ม">เครื่องดื่ม</option>
                        <option value="อื่นๆ">อื่นๆ</option>
                    </select>    
            </div>

            <div class="mb-4">
                <label for="file" class="block text-sm font-medium text-gray-600">อัพโหลดรูปภาพ</label>
                <input type="file" id="file" name="file" accept="image/*" class="mt-1 p-2 border rounded-md">
            </div>

            <div class="mb-4">
                <img src="https://via.placeholder.com/100" alt="รูปภาพ" id="preview" class="mt-2 w-24 h-24">
            </div>
            <button type="button" id="submitBtn"
                class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700">Submit</button>
        </form>
    </div>
    <script>
        let url = "https://script.google.com/macros/s/AKfycbxDrsqVSsIvA7A0X66JbI3wJ7ixky1JLbKJBHlraA_wacy6PWOXP3IE_v8zLrKAeyk8/exec";
        let file = document.querySelector("input[type='file']");
        let img = document.querySelector("img");
        let nameIdInput = document.getElementById("nameId");
        let roleId = document.getElementById("roleId");
        let numberIdInput = document.getElementById("numberId");
        let submitBtn = document.getElementById("submitBtn");

        submitBtn.addEventListener('click', () => {
            let fr = new FileReader();
            fr.addEventListener('loadend', () => {
                let res = fr.result;
                img.src = res;
                let spt = res.split("base64,")[1];

                let obj = {
                    base64: spt,
                    type: file.files[0].type,
                    name: file.files[0].name,
                    nameId: nameIdInput.value,
                    roleId: roleId.value,
                    numberId: numberIdInput.value
                }

                fetch(url, {
                    method: "POST",
                    body: JSON.stringify(obj)
                })
                    .then(r => r.text())
                    .then(data => console.log(data))
            })

            fr.readAsDataURL(file.files[0]);
        });
    </script>

</body>

</html>